function renderTimeline() {
    const be = b();
    const container = document.getElementById('timeline-eventos');
    let html = "";
    const ahora = Date.now();

    /* ───────── TOMAS ───────── */
    const ultToma = be.logs.find(l => l.txt.includes('Bibe') || l.txt.includes('Pecho'));
    if (ultToma) {
        const rest = (DATA.plazo * 3600000) - (ahora - ultToma.ts);
        html += `
        <div class="flex justify-between items-center bg-white/5 p-2 rounded-xl border border-white/5">
            <div class="flex items-center gap-2 text-blue-400">
                <i class="fa-solid fa-clock text-xs"></i>
                <p class="text-[9px] font-black uppercase tracking-widest">Próxima Toma</p>
            </div>
            <span class="text-sm font-black ${rest < 0 ? 'text-red-500 animate-pulse' : 'text-white'}">
                ${formatTime(rest)}
            </span>
        </div>`;
    }

    /* ───────── MEDICACIÓN ───────── */
    (be.meds || []).forEach(m => {
        if (m.last > 0) {
            const restMed = (m.last + m.h * 3600000) - ahora;
            html += `
            <div class="flex justify-between items-center bg-white/5 p-2 rounded-xl border border-white/5">
                <div class="flex items-center gap-2 text-indigo-400">
                    <i class="fa-solid fa-pills text-xs"></i>
                    <p class="text-[9px] font-black uppercase tracking-widest">${m.n}</p>
                </div>
                <span class="text-xs font-black ${restMed < 0 ? 'text-red-400 animate-pulse' : 'text-slate-400'}">
                    ${formatTime(restMed)}
                </span>
            </div>`;
        }
    });

    /* ───────── AGENDA (15 DÍAS) ───────── */
    const hoy = new Date();
    const limite = new Date();
    limite.setDate(hoy.getDate() + 15);

    const eventos = [];

    Object.keys(be.citas || {}).forEach(fecha => {
        const f = new Date(fecha);
        if (f >= hoy && f <= limite) {
            be.citas[fecha].forEach(c => {
                eventos.push({
                    fecha,
                    hora: c.hora,
                    txt: c.txt,
                    ts: new Date(`${fecha}T${c.hora}`).getTime()
                });
            });
        }
    });

    eventos
        .sort((a, b) => a.ts - b.ts)
        .forEach(ev => {
            html += `
            <div class="flex justify-between items-center bg-white/5 p-2 rounded-xl border border-white/5">
                <div class="flex items-center gap-2 text-blue-300">
                    <i class="fa-solid fa-calendar-day text-xs"></i>
                    <p class="text-[9px] font-black uppercase tracking-widest">
                        ${ev.txt}
                    </p>
                </div>
                <span class="text-[9px] font-black text-slate-400">
                    ${ev.fecha} · ${ev.hora}
                </span>
            </div>`;
        });

    container.innerHTML = html || `
        <p class="text-center text-[8px] text-slate-600 uppercase py-4">
            Todo al día
        </p>`;
}
