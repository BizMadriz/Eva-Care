<!DOCTYPE html>  
<html lang="es">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>EvaCare V23.0 - Full</title>  
    <script src="https://cdn.tailwindcss.com"></script>  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">  
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <style>  
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');  
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; overflow-x: hidden; }  
        .hidden { display: none !important; }  
        .reac-active { background: #dbeafe !important; border: 2px solid #2563eb !important; transform: scale(1.05); }
        .aviso-item { border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 8px; border-radius: 12px; background: rgba(255,255,255,0.05); }
        .cal-day { aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; border-radius: 1rem; cursor: pointer; font-size: 0.8rem; font-weight: 800; transition: 0.2s; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>  
</head>  
<body class="bg-slate-50 text-slate-900 pb-32">

<div id="setup-screen" class="fixed inset-0 bg-white z-[10000] flex flex-col items-center justify-center p-10 hidden">
    <div class="text-blue-600 text-5xl font-black italic mb-2">EvaCare</div>
    <p class="text-[10px] font-black text-slate-400 mb-8 uppercase tracking-[0.3em]">Acceso Familiar</p>
    <input id="family-id-input" type="text" placeholder="ID DE FAMILIA" class="w-full p-5 bg-slate-100 rounded-[2rem] mb-4 font-bold text-center outline-none border-2 border-transparent focus:border-blue-500 uppercase">
    <button onclick="saveFamilyId()" class="w-full bg-slate-900 text-white p-5 rounded-[2rem] font-black shadow-xl active:scale-95 transition-all">ACCEDER / CREAR</button>
</div>

<div id="loading-screen" class="fixed inset-0 bg-white z-[9999] flex flex-col items-center justify-center">
    <div class="text-blue-600 text-4xl font-black italic animate-pulse">EvaCare</div>
</div>

<div id="app-content" class="hidden">
    <header class="p-6 flex justify-between items-center bg-white/80 sticky top-0 z-40 border-b border-slate-100 backdrop-blur-md">
        <div class="flex flex-col">
            <span class="text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1">Ficha de:</span>
            <select id="bebe-selector" onchange="switchBebe(this.value)" class="bg-transparent font-black italic text-2xl outline-none text-blue-600 cursor-pointer"></select>
        </div>
        <div id="sync-status"></div>
        <button onclick="openModal('modal-menu')" class="w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-400"><i class="fa-solid fa-bars-staggered"></i></button>
    </header>

    <main id="tab-inicio" class="p-4 space-y-4">
        <div class="bg-slate-900 rounded-[2.5rem] p-7 text-white shadow-2xl">
            <h3 class="text-[9px] font-black text-blue-400 uppercase tracking-[0.2em] mb-4">Alertas Globales</h3>
            <div id="panel-avisos-global" class="space-y-3"></div>
        </div>
        <div id="lista-compra-global" class="grid gap-2"></div>
        <div class="grid grid-cols-4 gap-3">
            <button onclick="addLog('ðŸ’¦ Pis')" class="bg-white py-6 rounded-[2rem] font-black text-cyan-600 text-[10px] border shadow-sm flex flex-col items-center gap-2"><i class="fa-solid fa-droplet text-lg"></i>PIS</button>
            <button onclick="addLog('ðŸ’© Caca')" class="bg-white py-6 rounded-[2rem] font-black text-orange-800 text-[10px] border shadow-sm flex flex-col items-center gap-2"><i class="fa-solid fa-poop text-lg"></i>CACA</button>
            <button onclick="addLog('âœ¨ Aseo')" class="bg-white py-6 rounded-[2rem] font-black text-purple-600 text-[10px] border shadow-sm flex flex-col items-center gap-2"><i class="fa-solid fa-sparkles text-lg"></i>ASEO</button>
            <button onclick="addCompra()" class="bg-yellow-400 text-slate-900 rounded-[2rem] flex items-center justify-center shadow-lg text-xl"><i class="fa-solid fa-cart-shopping"></i></button>
        </div>
        <div class="grid grid-cols-2 gap-4">
            <button onclick="openModal('modal-pecho')" class="bg-white h-28 rounded-[2.5rem] border shadow-sm flex flex-col items-center justify-center"><i class="fa-solid fa-person-breastfeeding text-pink-500 mb-2 text-2xl"></i><span class="text-[10px] font-black uppercase">Pecho</span></button>
            <div class="space-y-3">
                <button onclick="openModal('modal-bibe')" class="w-full bg-white h-16 rounded-[1.8rem] border shadow-sm flex items-center justify-center gap-3"><i class="fa-solid fa-bottle-water text-blue-500 text-xl"></i><span class="text-[10px] font-black uppercase">BiberÃ³n</span></button>
                <button id="btn-repetir" onclick="repetirBibe()" class="w-full bg-blue-600 text-white h-9 rounded-full text-[9px] font-black uppercase hidden italic">Repetir Ãºltima</button>
            </div>
        </div>
        <div id="diario-hoy" class="space-y-2 pb-10"></div>
    </main>

    <main id="tab-nutricion" class="hidden p-4 space-y-5">
        <h2 class="text-3xl font-black italic text-orange-600 px-2">NutriciÃ³n</h2>
        <div class="bg-white p-7 rounded-[3rem] shadow-sm border space-y-5">
            <input id="food-input" type="text" placeholder="Â¿QuÃ© ha comido?" class="w-full p-4 bg-slate-50 rounded-2xl font-bold border-none outline-none">
            <div class="flex justify-around bg-slate-50 p-3 rounded-2xl">
                <button onclick="setReac('ðŸ˜‹', this)" class="reac-btn p-4 rounded-xl text-3xl">ðŸ˜‹</button>
                <button onclick="setReac('ðŸ¤¢', this)" class="reac-btn p-4 rounded-xl text-3xl">ðŸ¤¢</button>
                <button onclick="setReac('âš ï¸', this)" class="reac-btn px-4 rounded-xl text-[10px] font-black text-red-500">ALERGIA</button>
            </div>
            <button onclick="saveFood()" class="w-full bg-orange-500 text-white p-5 rounded-2xl font-black uppercase">Registrar Alimento</button>
        </div>
        <div id="lista-alimentos" class="space-y-2 pb-20"></div>
    </main>

    <main id="tab-salud" class="hidden p-4 space-y-6">
        <h2 class="text-3xl font-black italic text-indigo-600 px-2">Salud</h2>
        <div class="grid grid-cols-2 gap-4">
            <div onclick="openModal('modal-peso')" class="bg-white p-7 rounded-[2.5rem] border shadow-sm flex flex-col items-center">
                <i class="fa-solid fa-weight-scale text-indigo-500 mb-2 text-2xl"></i><span id="cur-
